---
title: Resume Framework (2)
author: "Misty"
tags: ["Study map","Job"]
categories: ["Study Map"]
date: 2021-06-19
---



## Hive & MapReduce

### Hive
* hive是基于Hadoop的一个数据仓库工具，用来进行数据提取、转化、加载，这是一种可以存储、查询和分析存储在Hadoop中的大规模数据的机制。hive数据仓库工具能将结构化的数据文件映射为一张数据库表，并提供SQL查询功能，能将SQL语句转变成MapReduce任务来执行。Hive的优点是学习成本低，可以通过类似SQL语句实现快速MapReduce统计，使MapReduce变得更加简单，而不必开发专门的MapReduce应用程序。hive十分适合对数据仓库进行统计分析。
* 它与关系型数据库的SQL略有不同，但支持了绝大多数的语句如DDL、DML以及常见的聚合函数、连接查询、条件查询。它还提供了一系列的工具进行数据提取转化加载，用来存储、查询和分析存储在Hadoop中的大规模数据集，并支持UDF（User-Defined Function）、UDAF(User-Defnes AggregateFunction)和UDTF（User-Defined Table-Generating Function），也可以实现对map和reduce函数的定制，为数据操作提供了良好的伸缩性和可扩展性。
* hive 并不适合那些需要高实时性的应用，例如，联机事务处理（OLTP）。hive 查询操作过程严格遵守Hadoop MapReduce 的作业执行模型，hive 将用户的hiveSQL 语句通过解释器转换为MapReduce 作业提交到Hadoop 集群上，Hadoop 监控作业执行过程，然后返回作业执行结果给用户。hive 并非为联机事务处理而设计，hive 并不提供实时的查询和基于行级的数据更新操作。hive 的最佳使用场合是大数据集的批处理作业，例如，网络日志分析。

### Mapreduce

#### MapReduce是什么
* MapReduce是一种分布式计算框架 ，以一种可靠的，具有容错能力的方式并行地处理上TB级别的海量数据集。主要用于搜索领域，解决海量数据的计算问题。
* MR有两个阶段组成：Map和Reduce，用户只需实现map()和reduce()两个函数，即可实现分布式计算。
#### MapReduce做什么
* MapReduce框架由Map和Reduce组成。
* Map()负责把一个大的block块进行切片并计算。
* Reduce() 负责把Map()切片的数据进行汇总、计算。
#### 工作流程
* 第一步对输入的数据进行切片，每个切片分配一个map()任务，map()对其中的数据进行计算，对每个数据用键值对的形式记录，然后输出到环形缓冲区。
* map（）中输出的数据在环形缓冲区内进行快排，每个环形缓冲区默认大小100M，当数据达到80M时（默认），把数据输出到磁盘上。形成很多个内部有序整体无序的小文件。
* 框架把磁盘中的小文件传到Reduce()中来，然后进行归并排序，最终输出。

![](https://raw.githubusercontent.com/M1styDay/image_hosting/master/hugo_images/20210816123056.png)

#### 要点
* MapReduce将输入的数据进行逻辑切片，一片对应一个Map任务
* Map以并行的方式处理切片
* 框架对Map输出进行排序，然后发给Reduce
* MapReduce的输入输出数据处于同一个文件系统（HDFS）
* 框架负责任务调度、任务监控、失败任务的重新执行
* 框架会对键和值进行序列化，因此键和值需要实现writable接口，框架会对键排序，因此必须实现writableComparable接口。

#### 原语
* “相同”key的键值对为一组调用一次Reduce方法，方法内迭代这组数据进行计算。




## 日常数据监控

### 监控模块

#### 任务达成
* 关注指标
    * GMV
    * GMV同比
    * 挑战任务
    * 挑战任务同比
    * 挑战任务进度
    * 挑战任务超时间预期
* 挑战任务
    * 经营分析周例会制定
    * 人为规定/往期预测

#### 大盘情况（给出成长因素）
* 关注指标
    * 二/三级部门
    * 成交
    * 成交同比
    * **日均PV**
    * PV同比
    * **转化率**
    * 转化率同比
    * **客单价**：销售额/销售订单（受到维度影响，不同维度的客单价不同）
    * 客单价同比
    * **件单价**：销售额/销售量
    * 件单价同比
* 客单价上涨原因（客单价 = 件单价 X 客单件）
    * 件单价上涨（价格健康度）
    * 客单件上涨（大促/用户多个产品一起下单/B端用户增加）
* 销售额 = 购买UV X 客单价 = 点击UV X 转化率 X 客单价 = 曝光UV X 点击率 X 转化率 X 客单价
* 人均UV价值 = 点击率 X 转化率 X 客单价

#### 流量来源（结合业务动作解释流量变化）
* 关注指标
    * 大盘pv（5kw）
    * 日均PV
    * PV同比
    * 同比贡献
* 来源
    * 搜索
    * 常用功能
    * 直接流量联盟
    * 外部引荐
    * 购物车
    * 站内未识别
    * 广告变现
    * 搜索及信息流
    * 商品
    * 站内其他
    * 活动
    * 秒杀
    * 首页
    * 推荐
    * Other

#### 用户构成（结合业务动作分析用户变化，分析成交用户迁移）
* 关注指标
    * 有效用户（日均有效用户数、有效用户同比）：站内新 + 站外新
    * 搜索用户（日均搜索用户、搜索用户数同比）
    * 站内新（日均拉新、拉新同比）
    * 站外新（日均拉新、拉新同比）
    * 整体新用户（日均拉新、拉新同比）
* 搜索用户（日均pv） =》 有效用户 【关注用户链路】
* 站内新【关注站内投放，销售活动】

#### 成交场景（成交结构，分析场景变化趋势）
* 关注指标
    * 二/三级部门
    * 成交
    * 成交同比
    * 渠道同比
    * 同比贡献
    * 渠道占比
    * 占比贡献
* 常规零售 = 总量 - 专卖店 - 分销 - 大客户 - 特价
* 传统零售 = 总量 - cps - 专卖店 - 分销 - 大客户 - 特价
* 中心化、去中心化
    * 中心化：零售
    * 去中心化：线上+线下
* 自营/POP
* 销售规模、体量、比重、趋势、贡献度、结构、分部门情况、水分、风控、识别

#### 品类表现（给出强势品类、成长品类、弱势品类变化）
* 关注指标
    * 自营/POP成交
    * 自营/POOP成交同比
    * 自营/POP件单价
    * 自营/POP件单价同比
    * POP成交增速vs自营
    * 自营/POP流量同比
    * 自营/POP流量增速
    * POP与自营品牌细分与排名

### 成交额增幅异常

* 指标拆解
    * 销售额 = 购买UV X 客单价 = 点击UV X 转化率 X 客单价
    * 客单价 = 件单价 X 客单件
* 原因分析
    * 流量视角，商详主要来源的首页及搜索页流量同比有明显提升（与活动时间吻合），同时大盘流量同比没有明显变化
    * （件单价，件单价与客单价增幅一致）
    * 渠道视角，渠道配合流量，传统零售外的其他渠道同比与传统零售渠道同比增幅一致，双方对增长有相同的贡献
* 流量活动（流量增加原因）
    * 巅峰日，投放增加
    * 品类日、欧洲杯、游戏，活动增加
    * 大盘渗透率增加
* 深挖pv增速差异（POP/自营）
    * 流量来源主要是首页分发或搜索，对搜索流量进行分析
    * 影响搜索结果页带到商详页流量的大小由两个因素决定，一个是搜索结果页曝光量，一个是搜索结果页CTR，而整体CTR的大小是有搜索结果中的商品排序决定的，20%，15%……3%
    * 曝光量同比增长，集中在前十；曝光量同比减少，集中在前10
    * 搜索结果页中，POP商品位置同比靠前，带动了曝光量及点击量的增加
  

## 专题分析

### 活动效果评估
* 两点核心
    * 选择合理的评判标准
    * 找到合适的对比方法
* 步骤
    * 理清整个活动的流程
        * 搞清楚这个活动中涉及哪些关键的环节。（例如给新用户福利最后转化成付费用户的活动，这个活动涉及的流程包括用户注册、用户领取福利、用户活跃、用户付费等若干个环节）
    * 针对各环节找出评判指标（根据不同的场景将一级指标进行不同维度的拆分，从而能够细化我们分析的角度）
        * 拉新类活动（新增用户数）
        * 提活类活动（用户活跃/日活/月活）
        * 留存类活动（用户的次留、三流、五流等用户留存率）
        * 变现类活动（gmv收入）
        * 传播类活动（新增用户数）
    * 合适的对比方法
        * 和总量对比（比如月初定下的活跃用户数的总数是30w，在上线活动之后，评估我们的最终活跃用户数是否达到了这个总量）
        * 和增量对比（比如我们在推出一个活动之后，预期目标是将我们的收入从20w提升到25w，那么这里面的增量就是5w，那么5w就可以作为我们评估活动的增量标准）
        * 和往期同类活动对比（比如在以往的拉新活动中，我们每个用户的拉新成本是500，但是在这次的拉新活动中，每个新用户的拉新成本降低到了400，那么可以说这次活动的效果得到了优化，因为对于拉新的资金使用效率得到提升）
        * 从用户本身进行对比（从用户本身出发去研究与用户相关的若干指标，一般会使用ab实验来进行验证）
    * 深入研究效果好坏的原因
        * 回到第一步，研究每个环节中是否存在可以放大收益或者及时改正问题的地方。形成了一个活动效果评估的闭环
    * 给出建议

### 包邮活动效果

* 拉新（对站内新用户有正向影响，带来新用户12w，环比+28.7%）
    * 对站外拉新无正向影响，对站内拉新有正向影响
* 变现（对单量、成交额、GMV有正向影响，但对综合毛利率有负向影响，销售额增长带来的毛利未能抵消免运费带来的损失）
    * 对<99元sku控比提升效果不明显（尤其是不同部门）
    * 不同部门品牌数据（腰部品牌、头部品牌、尾部品牌）
    * 渠道增速不同（直播、cps快）

### 话费券活动效果

* 时间、品类、品牌
* 成交额、成交量、成本
* 申请-发出-使用转化率
* 提升成交额/品牌引流
* 页面改版
* 额度选择
* 转化率提升0.25%

### 销售渠道占比异常

#### 价格健康度

* 价格诚信度（强制要求做到的部分，促销场景，促销参与率，近60天内出现最多的价格，红字虚高）
* 价格价格竞争力（比价平台，页面价竞争力，到手价竞争力）
* 价格波动性（占比，变价，30天浮动，10次，测试顾客心理预期，触达用户体验）
* NPS（NPS得分）
    * 回收标准
    * 回收市场
    * 计算方式

#### 渠道健康度

* 判断标准（不同渠道不同）
    * 收货地址
    * 单个订单sku销量
    * 金额
* 逐鹿之战/cps


## 指标开发与体系搭建

### 监控逻辑

* 因为过程有内控流程及公司类似各种风控系统通过发票/手机号/收货地址/供应商/IP关系等关系进行预警审查，所以换一个角度进行监控预警：（整体维度、品牌维度、采销维度、用户维度）
    * 家电整体及部门根据历史占比进行总量控制监控，从而控制整体风险规模；
    * 交易流程主要角色进行监控：品牌-采销-用户，预警风险在哪些品牌，哪些采销哪些用户上，以便提前干预。



### 判断标准
* 判断标准（不同渠道不同）
    * 收货地址
    * 单个订单sku销量
    * 金额



## 大促监控

* 榜单
* 战报
    * 预测达成
    * 分模式
    * 分渠道
    * 分品类
    * 流量&用户